#!nsh
#
# @name IF750A
#
# @type Quadrotor x
# @class Copter
#

sh /etc/init.d/4001_quad_x

if [ $AUTOCNF = yes ]
then
	V# Vehicle attitude PID tuning
	param set MC_DTERM_CUTOFF 25.0000
	param set MC_PITCHRATE_D 0.0100
	param set MC_PITCHRATE_I 0.2000
	param set MC_PITCHRATE_P 0.2800
	param set MC_PITCH_P 6.0000
	param set MC_ROLLRATE_D 0.0100
	param set MC_ROLLRATE_I 0.2000
	param set MC_ROLLRATE_P 0.2800
	param set MC_ROLL_P 6.0000
	param set MC_YAWRATE_I 0.2000
	param set MC_YAWRATE_MAX 100.0000
	param set MC_YAWRATE_P 0.3500
	param set MC_YAW_P 2.0000

	# Position Control Tuning
	param set MPC_POS_MODE 3
	param set MPC_THR_HOVER 0.5200
	param set MPC_XY_VEL_MAX 2.0000
	param set MPC_XY_VEL_P 0.1200
	param set MPC_Z_VEL_I 0.1000

	# EKF2 parameters
	param set EKF2_GPS_POS_X 0.0000
	param set EKF2_GPS_POS_Y 0.1800
	param set EKF2_GPS_POS_Z -0.1600
	param set EKF2_HGT_MODE 0
	param set EKF2_IMU_POS_X -0.0630
	param set EKF2_IMU_POS_Y 0.0340
	param set EKF2_OF_POS_X -0.1740
	param set EKF2_OF_POS_Z 0.0460
	param set EKF2_RNG_POS_X -0.1410
	param set EKF2_RNG_POS_Z 0.0440

	# PWM parameters
	param set PWM_AUX_DISARMED 900
	param set PWM_AUX_MIN 1150
	param set PWM_AUX_RATE 400
	param set PWM_MAIN_DIS3 1050
	param set PWM_MAIN_FAIL3 1050
	param set PWM_AUX_RATE 400
	param set PWM_MAX 1950
	param set PWM_MIN 1120
	param set PWM_RATE 400
	param set PWM_SBUS_MODE 1
	param set SYS_USE_IO 1

	# Sensors Parameters
	param set SENS_BOARD_ROT 10
	param set SENS_BOARD_X_OFF -0.3664
	param set SENS_BOARD_Y_OFF 1.5339
	param set SENS_EN_LL40LS 2
	param set SENS_FLOW_MAXHGT 15.0000
	param set IMU_GYRO_CUTOFF 70.0000

	# MAVLink Parameters
	param set MAV_1_CONFIG 102
	param set MAV_1_RATE 0
	param set SER_TEL2_BAUD 1500000

	# RTK Parameters
	# To recalculate since antennas are not symmetric anymore
	param set GPS_YAW_OFFSET 90.0000

	# Power Parametets
	param set BAT_N_CELLS 6

fi
